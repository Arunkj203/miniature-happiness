<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{%static 'style.css' %}">
    <title>CGPA Calculator</title>
</head>
<body onload="fun()">
    <script>
        
       function fun(){
        var mk=new Array();
        var ss=sessionStorage.getItem('array');
        var gd=JSON.parse(ss);
       
      
     var ls = JSON.parse("{{dat|escapejs}}");
     var pt = JSON.parse("{{cp|escapejs}}");
     for(let x of gd){
        for(let y of ls){
        if(x==y[0]){
            mk.push(y[1]);
        }
        }   
     }
     var sum = 0;
     var prod= 0;
     for(let i=0;i<gd.length;i++){
        prod += mk[i] * parseInt(pt[i]);
        sum +=  parseInt(pt[i]) ;
}
document.getElementById("pd").innerHTML=prod;
document.getElementById("sm").innerHTML=sum;
     var gp=prod/sum;
   
     document.getElementById("lab").innerHTML=gp;
   
    }
    </script>


<h1 >YOUR GPA IS:</h1><br>

<span id="pd" > </span><br>
<span id="sm" > </span><br>

<span id="lab" > </span><br>

</body>
</html>